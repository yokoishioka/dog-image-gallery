<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Asana | San Francisco Pet Adoption Agency</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="assets/styles/site.css">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script>
$(document).ready(function(){
	var items = [];
	var thisIndex = 0;
	var galleryLength;
	var thumbnailLimit = 5;
	
	// get images from the feed into the gallery
    $.getJSON( "assets/data/dogs.json", function( data ) {
		$.each( data.dogs, function( key, val ) {
			items.push("<div class='dog-image' id='" + key + "'><img src='/dog-image-gallery/" + val.image + "' alt='asana: san francisco pet adoption agency'></div>");
		});
		
		galleryLength = items.length;
		
		
		// add image counter
		$(".dog-image-counter").html((thisIndex + 1) + " / " + galleryLength);
		
		// put images into the thumbnail 
		for (i = 0; i < thumbnailLimit; i++) {
			$(".dog-gallery-thumbnail").append(items[i]);
		}
		
	});	
	
	// dog image thumbnail gallery - show previous or next set of thumbnails
	$("a.previous-dog-image-set").addClass("disabled");
	$("a.previous-dog-image-set").click(function(){
		$("a.next-dog-image-set").removeClass("disabled");
		if (thisIndex >= thumbnailLimit) {
			$(".dog-gallery-thumbnail").html("");
			for (i = thisIndex - thumbnailLimit; i < thisIndex; i++) {
				$(".dog-gallery-thumbnail").append(items[i]);
			}
			thisIndex = thisIndex - thumbnailLimit;
			if (thisIndex == 0) {
				$(this).addClass("disabled");
			}
		}
	});
	$("a.next-dog-image-set").click(function(){
		$("a.previous-dog-image-set").removeClass("disabled");
		if (thisIndex < galleryLength - thumbnailLimit ) {
			
			$(".dog-gallery-thumbnail").html("");
			for (i = thisIndex + thumbnailLimit; i < thisIndex + thumbnailLimit + thumbnailLimit; i++) {
				$(".dog-gallery-thumbnail").append(items[i]);
			}
			thisIndex = thisIndex + thumbnailLimit;
			if (thisIndex == (galleryLength - thumbnailLimit)) {
				$(this).addClass("disabled");
			}
		}
		
	});
	
	// dog image gallery - previous and next navigation buttons	
	$('a.previous-dog-image').addClass("disabled");
	
	$('a.previous-dog-image').click(function(){
		if (thisIndex < galleryLength - thumbnailLimit + 1) {
			$("a.next-dog-image-set").removeClass("disabled");
		}
		if (thisIndex < thumbnailLimit + 1) {
			$("a.previous-dog-image-set").addClass("disabled");
		}
		
		if (thisIndex == 1) {
			$(this).addClass("disabled");
		}
		if (thisIndex > 0) {
			
			thisIndex--;
			
			// update thumbnail gallery with previous thumbnailLimit images
			if ((thisIndex + 2) % thumbnailLimit == 1) {
				$(".dog-gallery-thumbnail").html("");
				for (i = thisIndex - thumbnailLimit - 1; i < thisIndex + 1; i++) {
					$(".dog-gallery-thumbnail").append(items[i]);
				}
				
				console.log(thisIndex);	
			}
					
			// change border around thumbnail image to active
			$(".dog-gallery-thumbnail #" + (thisIndex + 1) + ".dog-image img").removeClass("active");
			$(".dog-gallery-thumbnail #" + thisIndex + ".dog-image img").addClass("active");
			
			// get previous image to put into slideshow
			$(".dog-gallery").html(items[thisIndex]);
			$(".dog-image-counter").html((thisIndex + 1) + " / " + galleryLength);
			$("a.next-dog-image").removeClass("disabled");
		}
		
	});
	$('a.next-dog-image').click(function(){

		if (thisIndex >= thumbnailLimit - 1) {
			$("a.previous-dog-image-set").removeClass("disabled");
		}
		if (thisIndex > galleryLength - thumbnailLimit - 2) {
			$("a.next-dog-image-set").addClass("disabled");
		}
		if (thisIndex == galleryLength - 2) {
			$(this).addClass("disabled");
		}
		if (thisIndex < galleryLength - 1) {
			thisIndex++;
			// update thumbnail gallery with next thumbnailLimit images
			if ((thisIndex + 1) % thumbnailLimit == 1) {
				$(".dog-gallery-thumbnail").html("");
				for (i = thisIndex; i < (thumbnailLimit + thisIndex); i++) {
					$(".dog-gallery-thumbnail").append(items[i]);
				}
			}
			// change border around thumbnail image to active
			$(".dog-gallery-thumbnail #" + (thisIndex - 1) + ".dog-image img").removeClass("active");
			$(".dog-gallery-thumbnail #" + thisIndex + ".dog-image img").addClass("active");
			
			// get next image to put into slideshow
			$(".dog-gallery").html(items[thisIndex]);
			$(".dog-image-counter").html((thisIndex + 1) + " / " + galleryLength);
			$("a.previous-dog-image").removeClass("disabled");
		}

	});
	// dog image thumbnail gallery - send thumbnail to slideshow gallery
	$(document).on("click", ".dog-gallery-thumbnail .dog-image", function(){
		$(".dog-gallery-slideshow").show();
		
		hideBorder();
		$(".dog-gallery-thumbnail #" + this.id + ".dog-image img").addClass("active");
		
		// make sure navigation is disabled if user can't progress in slideshow
		$("a.next-dog-image, a.previous-dog-image").removeClass("disabled");
		if (this.id == 0) {
			$("a.previous-dog-image").addClass("disabled");
		}
		else if (this.id == galleryLength - 1) {
			$("a.next-dog-image").addClass("disabled");
		}
		
		// change slideshow image to selected thumbnail
		$(".dog-gallery").html(items[this.id]);
		thisIndex = parseInt(this.id);
		$(".dog-image-counter").html((thisIndex + 1) + " / " + galleryLength);
		
	});

	// close slideshow 
	$(".close-me").click(function(){
		$(this).parent().hide();
		hideBorder();
	});
	
	// remove border from thumbnail img
	function hideBorder() {
		$(".dog-gallery-thumbnail .dog-image img").each(function(){
			$(this).removeClass("active");
		});
	}

});
</script>
</head>

<body>
	<div class="container">
		<div class="dog-gallery-thumbnail-all">
			<a class="dog-gallery-thumbnail-nav previous-dog-image-set"><i class="fas fa-angle-double-left"></i></a>
			<div class="dog-gallery-thumbnail">
			</div>
			<a class="dog-gallery-thumbnail-nav next-dog-image-set"><i class="fas fa-angle-double-right"></i></a>
		</div>
		
		
		<div class="dog-gallery-slideshow">	
			<div class="dog-gallery-navigation">
				<a class="previous-dog-image">
					<i class="fas fa-dog"></i>
					<i class="fas fa-angle-double-left"></i>
				</a>
				<div class="dog-image-counter">
				</div>
				<a class="next-dog-image">
					<i class="fas fa-dog"></i>
					<i class="fas fa-angle-double-right"></i>
				</a>
			
			</div>
			<a class="close-me" title="Close Slideshow"><i class="far fa-times-circle"></i></a>
			
		
			<div class="dog-gallery">
				
			</div>
		</div>
		
	</div>
  
</body>
</html>
